<!DOCTYPE html> <html> <head>
<title>bare Ajax</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf8">
<script type="text/javascript">
<!--
//Browser Support Code
function getAjaxObject(){
  var result;
  try{
    // Opera 8.0+, Firefox, Safari
    result = new XMLHttpRequest();
  } catch (e){
    // Internet Explorer Browsers
    try{
      result = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
      try{
        result = new ActiveXObject("Microsoft.XMLHTTP");
      } catch (e){
        // Something went wrong
        alert("Your browser broke!");
        return false;
      }
    }
  }
  return result;
}

function targetIds() {
  return ["one", "two", "three", "four", "five"];
}

function Target(id) {
  this.id = id;
}

function selectTargets() {
  var targetIdsVar = targetIds();
  var len = targetIdsVar.length;
  var result = new Array(len);
  var each;
  for (var i = 0; i < len; i++) {
    each = targetIdsVar[i];
    result[i] = new Target(each);
  }
  result.push(new Target("junk")); //Temporary test.
  return result;
}

var newContent = "<ol><li>hello</li><li>there</li><li>in</li><li>Pusher land</li></ol>"

function alterTargets() {
//  $('#one').css("color","yellow");
  var elem;
  var targets = selectTargets();
  var len = targets.length;
  for (var i = 0; i < len; i++) {
    elem = document.getElementById(targets[i].id);
    if (null === elem) continue;
    elem.innerHTML = newContent;
  }
}

function requestUpdate() {
  var ajaxRequest = getAjaxObject();
  ajaxRequest.open('GET', 'http://localhost:5000/ajax',false);
  ajaxRequest.send();
//  alert(ajaxRequest.status);
//  ajaxRequest.
  alert(ajaxRequest.responseText);

}

function replaceOne() {
  var becomes = 'new stuff';
//  var a = jQuery('#one');
//  a.empty();
//  a.append(becomes);
}

// When DOM fully loaded:
window.document.addEventListener('DOMContentLoaded', function() {
  //alert('window document ready');

  replaceOne();

//  jQuery.get('/ajax_load_events.json', 'one', function(response) {
//    alert(response);
//    replaceOne();
//  });

}, false);

// When images, etc. fully loaded:
window.onload = function() {
  //alert('window load');
  requestUpdate();
  alterTargets();
};
//-->
</script> </head> <body>

<div id="error"></div>

<div id="one">one-content</div>
<div id="two">two-content</div>
<div id="three">three-content</div>
<div id="four">four-content</div>
<div id="five">five-content</div>

<a href="#">a</a>

</body> </html>
